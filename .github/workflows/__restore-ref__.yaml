---
name: Restore ref name
on:
  workflow_dispatch:
jobs:
  restore-ref-name:
    name: ":recycle: Restore ref"
    timeout-minutes: 5
    runs-on: ubuntu-latest
    container:
      image: ixxel/toolbox:base-latest
    steps:
      - name: Clone code
        uses: actions/checkout@v4
        with:
          fetch-depth: "0"
          token: ${{ secrets.GITHUB_TOKEN }}
      - name: Git config
        id: git-config
        uses: ixxeL-DevOps/gha-templates/.github/actions/git-config@v1.1.1
        with:
          git-workdir: .
      - name: Restore ref
        id: restore-ref
        uses: ixxeL-DevOps/gha-templates/.github/actions/change-action-ref@v1.1.1
        with:
          workflows-directory: ./.github/workflows/*.yaml
          actions-source: ixxeL-DevOps
          new-ref: ${{ github.ref_name }}
      - name: Git push
        id: git-push-final
        uses: ixxeL-DevOps/gha-templates/.github/actions/git-push@v1.1.1
        with:
          git-msg: ":recycle: Restore parameters from user ${GITHUB_ACTOR} [skip ci]"
          git-workdir: .
          git-staging-dir: .
          push-option: ci.skip
